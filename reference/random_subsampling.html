<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Random subsampling — random_subsampling • AlpsNMR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Random subsampling — random_subsampling"><meta property="og:description" content="Random subsampling"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AlpsNMR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.7.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Vig01-introduction-to-alpsnmr.html">Introduction to AlpsNMR</a>
    </li>
    <li>
      <a href="../articles/Vig02-handling-metadata-and-annotations.html">Handling metadata and annotations</a>
    </li>
    <li>
      <a href="../articles/Vig03-plotting-samples.html">Plotting NMR samples</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/sipss/AlpsNMR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Random subsampling</h1>
    <small class="dont-index">Source: <a href="https://github.com/sipss/AlpsNMR/blob/HEAD/R/nmr_data_analysis.R" class="external-link"><code>R/nmr_data_analysis.R</code></a></small>
    <div class="hidden name"><code>random_subsampling.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Random subsampling</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">random_subsampling</span><span class="op">(</span>
  <span class="va">sample_idx</span>,
  iterations <span class="op">=</span> <span class="fl">10L</span>,
  test_size <span class="op">=</span> <span class="fl">0.25</span>,
  keep_together <span class="op">=</span> <span class="cn">NULL</span>,
  balance_in_train <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sample_idx</dt>
<dd><p>Typically a numeric vector with sample index to be separated.
A character vector with sample IDs could also be used</p></dd>


<dt>iterations</dt>
<dd><p>An integer, the number of iterations in the random subsampling</p></dd>


<dt>test_size</dt>
<dd><p>A number between 0 and 1. The samples to be included in the
test set on each interation.</p></dd>


<dt>keep_together</dt>
<dd><p>Either <code>NULL</code> or a factor with the same length as <code>sample_idx</code>.
<code>keep_together</code> can be used to ensure that groups of samples are kept
in together in all iterations (either on training or on test, but never split).
A typical use case for this is when you have sample replicates and you want
to keep all replicates together to prevent overoptimistic results (having
one sample on the train subset and its replicate on the test subset would
make the prediction easier to guess).
Another use case for this is when you have a longitudinal study and you
want to keep some subjects in the same train or test group, because you
want to use some information in a longitudinal way (e.g. a multilevel plsda model).</p></dd>


<dt>balance_in_train</dt>
<dd><p>Either <code>NULL</code> or a factor with the same length as <code>sample_idx</code>.
<code>balance_in_train</code> can be used to force that on each iteration, the train
partition contains the same number of samples of the given factor levels.
For instance, if we have a dataset with 40 samples of class "A" and 20 samples
of class "B", using a <code>test_size = 0.25</code>, we can force to always have 16
samples of class "A" and 16 samples of class "B" in the training subset.
This is beneficial to those algorithms that require that the training groups
are balanced.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list of length equal to <code>iterations</code>. Each element of the list is
a list with two entries (<code>training</code> and <code>test</code>) containing the <code>sample_idx</code></p>


<p>values that will belong to each subset.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu">random_subsampling</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, iterations <span class="op">=</span> <span class="fl">4</span>, test_size <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]$training</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]   1   4   6   7   8   9  10  11  13  14  16  17  18  21  22  23  24  26  28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [20]  29  30  32  33  34  36  37  39  40  41  42  43  44  45  47  48  49  50  52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [39]  54  55  56  57  58  59  61  62  63  64  65  68  69  71  72  73  75  76  77</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [58]  78  79  81  83  84  85  86  87  88  89  90  92  93  95  96  97  98 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]$test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  2  3  5 12 15 19 20 25 27 31 35 38 46 51 53 60 66 67 70 74 80 82 91 94 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]$training</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  1  2  4  5  7  8  9 10 11 12 13 15 16 17 19 20 21 23 25 27 28 30 31 32 34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26] 35 36 37 38 40 42 43 44 46 47 49 50 51 53 54 55 56 57 58 59 60 61 62 63 65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51] 66 67 68 69 70 71 72 73 76 77 78 80 81 83 84 86 88 89 91 92 93 94 96 97 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]$test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]   3   6  14  18  22  24  26  29  33  39  41  45  48  52  64  74  75  79  82</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [20]  85  87  90  95  98 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]$training</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]   2   3   5   6   7   8  10  12  13  14  15  16  17  18  24  25  26  27  28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [20]  29  30  31  33  35  37  38  39  40  41  42  43  45  46  48  50  51  53  54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [39]  55  56  57  58  59  60  64  65  67  68  69  70  71  73  75  76  77  79  80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [58]  81  82  83  84  85  86  87  88  89  91  92  93  95  96  97  98  99 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]$test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  1  4  9 11 19 20 21 22 23 32 34 36 44 47 49 52 61 62 63 66 72 74 78 90 94</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]$training</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]   1   2   3   4   8   9  11  12  13  14  15  17  19  21  22  23  24  25  26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [20]  27  28  29  30  31  32  34  36  37  38  39  40  44  45  46  47  48  50  51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [39]  52  54  57  58  61  62  63  66  67  68  69  70  73  75  76  78  79  80  81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [58]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  98  99 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]$test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  5  6  7 10 16 18 20 33 35 41 42 43 49 53 55 56 59 60 64 65 71 72 74 77 97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="va">subject_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>, <span class="st">"Eve"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">random_subsampling</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, iterations <span class="op">=</span> <span class="fl">2</span>, test_size <span class="op">=</span> <span class="fl">0.25</span>, keep_together <span class="op">=</span> <span class="va">subject_id</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]$training</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]$test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]$training</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]$test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Ivan Montoliu Roura, Sergio Oller Moreno, Francisco Madrid Gambin, Luis Fernandez, Héctor Gracia Cabrera, Santiago Marco Colás.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

